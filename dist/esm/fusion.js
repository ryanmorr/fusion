/*! @ryanmorr/fusion v1.0.0 | https://github.com/ryanmorr/fusion */
/*! @ryanmorr/isotope v3.1.0 | https://github.com/ryanmorr/isotope */
class e{constructor(e){this._value=e,this._subscribers=[]}value(){return this._value}set(e){const t=this.value();if(e!==t)return this._value=e,this._subscribers.slice().forEach((n=>n(e,t))),e}subscribe(e){const t=this._subscribers;if(!t.includes(e))return t.push(e),e(this.value()),()=>{const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}then(e){e(this.value())}toString(){return String(this.value())}valueOf(){return this.value()}toJSON(){return this.value()}}let t=class extends e{update(e){return this.set(e(this.value()))}},n=class extends e{constructor(e,t){super();let n=!1;const r=[],s=()=>super.set(t(...r));e.forEach(((e,t)=>e.subscribe((e=>{r[t]=e,n&&s()})))),n=!0,s()}};class r extends e{constructor(e,t){super();let n=0,r=!1;const s=[],u=e=>t(...s.concat([e]));e.forEach(((e,t)=>e.subscribe((e=>{if(s[t]=e,r){n++;const e=n;u((t=>{n===e&&super.set(t)}))}})))),r=!0,u((e=>super.set(e)))}}function s(e){return new t(e)}function u(...e){const t=e.pop();return t.length>e.length?new r(e,t):new n(e,t)}n.prototype.set=void 0,r.prototype.set=void 0,class extends e{constructor(e,t){super(e),this._reducer=t}dispatch(e){return super.set(this._reducer(this.value(),e))}}.prototype.set=void 0;
/*! @ryanmorr/amble v0.1.2 | https://github.com/ryanmorr/amble */
const c=/([^{};]*)([;{}])/g,o=/(\r\n|\r|\n)+/g,i=/\t/g,l=/\s{2,}/g,a=/\/\*[\W\w]*?\*\//g,h=/\s*([:;{}])\s*/g,f=/\};+/g,p=/([^:;{}])}/g;class d extends e{constructor(e){super(),this.mq=matchMedia(e),this.mq.addEventListener("change",this.set.bind(this)),this.query=e,this.set()}set(){super.set(this.mq.matches)}}function v(e){return new d(e)}let m=null;const g=[];function y(e){return Array.from(document.querySelectorAll(e))}class b extends e{constructor(e){var t;super(y(e)),this.selector=e,t=this,m||(m=new MutationObserver((()=>g.forEach((e=>e.set())))),m.observe(document.documentElement,{childList:!0,subtree:!0})),g.push(t)}set(){const e=this.value(),t=y(this.selector);(t.filter((t=>!e.includes(t))).length>0||e.filter((e=>!t.includes(e))).length>0)&&super.set(t)}}function $(e){return new b(e)}function x(){return Math.random().toString(36).substring(2,11)}function E(e){return e&&"function"==typeof e.subscribe}function w(e){return e&&"function"==typeof e.then}function S(e,t,n){return e.raw.reduce(((e,r,s)=>e+n(t[s-1])+r))}const _=document.documentElement.style;function q(e,t){if("function"==typeof t)return q(e,t());if(w(t))return t.then((t=>q(e,t)));""!==_.getPropertyValue(e)&&null==t?_.removeProperty(e):null!=t&&_.setProperty(e,t)}function C(e){if("prop"in e)return e.prop;const t=`--${x()}`;return E(e)?e.subscribe((e=>q(t,e))):e.then((e=>q(t,e))),e.prop=t}let O;const A=/([\s\S]+,[\s\S]+)/m;function L(e){const t=[{children:[]}];let n=0;return function(e,t){e=function(e){return e.replace(o," ").replace(i," ").replace(l," ").replace(a,"").trim().replace(h,"$1").replace(f,"}").replace(p,"$1;}")}(e),c.lastIndex=0;for(let n;null!=(n=c.exec(e));)t(n[1],n[2])}(e,((e,r)=>{"{"==r?t[++n]={selector:e,rules:"",children:[]}:"}"==r?(t[n].rules+=e,t[--n].children.push(t.pop())):";"==r&&(t[n].rules+=e+r)})),t[0].children}function M(e,t){return e.reduce(((e,n)=>{let r=n.selector.trim();return"@"===r[0]?(e+=r+"{",n.children.length>0&&(e+=M(n.children,t)+"}")):(r=t&&"&"===r[0]?t+r.substring(1).replace(A,":is($1)"):t?t+" "+r.replace(A,":is($1)"):r.replace(A,":is($1)"),e+=r+"{"+n.rules+"}",n.children.length>0&&(e+=M(n.children,r))),e}),"")}function P(e){return M(L(e))}function N(e){return"function"==typeof e?N(e()):E(e)?e instanceof d?"@media "+e.query:e instanceof b?e.selector:`var(${C(e)})`:w(e)?`var(${C(e)})`:e&&1===e.nodeType&&"STYLE"===e.nodeName?e.textContent:e}function T(e){O||(O=document.createElement("style"),document.head.appendChild(O)),O.textContent+=e}function W(e,...t){const n=S(e,t,N),r="fusion-"+x();return T(P(`.${r} { ${n} }`)),r}function j(e,...t){const n=S(e,t,N),r=document.createElement("style");return r.textContent+=P(n),r}function k(...e){let t=1;const n=e.length,r=(e,s,u)=>"function"==typeof s?r(e,s(),u):(E(s)||w(s)?(t++,e+=`var(${C(s)}`):"string"==typeof s&&s.startsWith("--")?(t++,e+=`var(${s}`):e+=s,e+=u+1!==n?", ":Array(t).join(")"));return e.reduce(r,"")}function I(e){return"function"==typeof e?I(e()):E(e)?`var(${C(e)})`:e}function J(e,...t){const n="fusion-animation-"+x();return T(`@keyframes ${n} { ${S(e,t,I)} }`),n}export{j as css,u as derived,k as fallback,J as keyframes,v as media,$ as query,s as store,W as style};
