/*! @ryanmorr/fusion v1.0.1 | https://github.com/ryanmorr/fusion */
/*! @ryanmorr/isotope v3.2.1 | https://github.com/ryanmorr/isotope */
class e{#e;#t=[];constructor(e){this.#e=e,this.#t=[]}value(){return this.#e}set(e){const t=this.value();if(e!==t)return this.#e=e,this.#t.slice().forEach((n=>n(e,t))),e}subscribe(e){const t=this.#t;if(!t.includes(e))return t.push(e),e(this.value()),()=>{const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}then(e){e(this.value())}toString(){return String(this.value())}valueOf(){return this.value()}toJSON(){return this.value()}}let t=class extends e{update(e){return this.set(e(this.value()))}},n=class extends e{constructor(e,t,n){super();let r=!1;const s=[],u=n?()=>super.set(t(s)):()=>super.set(t(...s));e.forEach(((e,t)=>e.subscribe((e=>{s[t]=e,r&&u()})))),r=!0,u()}};class r extends e{constructor(e,t,n){super();let r=0,s=!1;const u=[],c=n?e=>t(u,e):e=>t(...u.concat([e]));e.forEach(((e,t)=>e.subscribe((e=>{if(u[t]=e,s){r++;const e=r;c((t=>{r===e&&super.set(t)}))}})))),s=!0,c((e=>super.set(e)))}}function s(e){return new t(e)}function u(...e){let t,s;const u=Array.isArray(e[0]);u?(t=e[0],s=e[1]):(t=e,s=e.pop());const c=s.length;return u&&2===c||c>t.length?new r(t,s,u):new n(t,s,u)}n.prototype.set=void 0,r.prototype.set=void 0,class extends e{#n;constructor(e,t){super(e),this.#n=t}dispatch(e){return super.set(this.#n(this.value(),e))}}.prototype.set=void 0;
/*! @ryanmorr/amble v0.2.0 | https://github.com/ryanmorr/amble */
const c=/([^{};]*)([;{}])/g,o=/(\r\n|\r|\n)+/g,i=/\t/g,l=/\s{2,}/g,a=/\/\*[\W\w]*?\*\//g,h=/\s*([:;{}])\s*/g,f=/\};+/g,p=/([^:;{}])}/g;class d extends e{constructor(e){super(),this.mq=matchMedia(e),this.mq.addEventListener("change",this.set.bind(this)),this.query=e,this.set()}set(){super.set(this.mq.matches)}}function m(e){return new d(e)}let v=null;const g=[];function y(e){return Array.from(document.querySelectorAll(e))}class b extends e{constructor(e){var t;super(y(e)),this.selector=e,t=this,v||(v=new MutationObserver((()=>g.forEach((e=>e.set())))),v.observe(document.documentElement,{childList:!0,subtree:!0})),g.push(t)}set(){const e=this.value(),t=y(this.selector);(t.filter((t=>!e.includes(t))).length>0||e.filter((e=>!t.includes(e))).length>0)&&super.set(t)}}function $(e){return new b(e)}function x(){return Math.random().toString(36).substring(2,11)}function E(e){return e&&"function"==typeof e.subscribe}function w(e){return e instanceof Promise}function S(e,t,n){return e.raw.reduce(((e,r,s)=>e+n(t[s-1])+r))}const q=new WeakMap,A=document.documentElement.style;function C(e,t){if("function"==typeof t)return C(e,t());if(w(t))return t.then((t=>C(e,t)));""!==A.getPropertyValue(e)&&null==t?A.removeProperty(e):null!=t&&A.setProperty(e,t)}function M(e){if(q.has(e))return q.get(e);const t=`--${x()}`;return E(e)?e.subscribe((e=>C(t,e))):e.then((e=>C(t,e))),q.set(e,t),t}let O;const P=/([\s\S]+,[\s\S]+)/m;function L(e){const t=[{children:[]}];let n=0;return function(e,t){e=function(e){return e.replace(o," ").replace(i," ").replace(l," ").replace(a,"").trim().replace(h,"$1").replace(f,"}").replace(p,"$1;}")}(e),c.lastIndex=0;for(let n;null!=(n=c.exec(e));)t(n[1],n[2])}(e,((e,r)=>{"{"==r?t[++n]={selector:e,rules:"",children:[]}:"}"==r?(t[n].rules+=e,t[--n].children.push(t.pop())):";"==r&&(t[n].rules+=e+r)})),t[0].children}function W(e,t){return e.reduce(((e,n)=>{let r=n.selector.trim();return"@"===r[0]?(e+=r+"{",n.children.length>0&&(e+=W(n.children,t)+"}")):(r=t&&"&"===r[0]?t+r.substring(1).replace(P,":is($1)"):t?t+" "+r.replace(P,":is($1)"):r.replace(P,":is($1)"),e+=r+"{"+n.rules+"}",n.children.length>0&&(e+=W(n.children,r))),e}),"")}function k(e){return W(L(e))}function N(e){return"function"==typeof e?N(e()):E(e)?e instanceof d?"@media "+e.query:e instanceof b?e.selector:`var(${M(e)})`:w(e)?`var(${M(e)})`:e&&1===e.nodeType&&"STYLE"===e.nodeName?e.textContent:e}function T(e){O||(O=document.createElement("style"),document.head.appendChild(O)),O.textContent+=e}function j(e,...t){const n=S(e,t,N),r="fusion-"+x();return T(k(`.${r} { ${n} }`)),r}function I(e,...t){const n=S(e,t,N),r=document.createElement("style");return r.textContent+=k(n),r}function J(...e){let t=1;const n=e.length,r=(e,s,u)=>"function"==typeof s?r(e,s(),u):(E(s)||w(s)?(t++,e+=`var(${M(s)}`):"string"==typeof s&&s.startsWith("--")?(t++,e+=`var(${s}`):e+=s,e+=u+1!==n?", ":Array(t).join(")"));return e.reduce(r,"")}function V(e){return"function"==typeof e?V(e()):E(e)?`var(${M(e)})`:e}function Y(e,...t){const n="fusion-animation-"+x();return T(`@keyframes ${n} { ${S(e,t,V)} }`),n}export{I as css,u as derived,J as fallback,Y as keyframes,m as media,$ as query,s as store,j as style};
