/*! @ryanmorr/fusion v1.0.1 | https://github.com/ryanmorr/fusion */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).fusion={})}(this,(function(e){"use strict";
/*! @ryanmorr/isotope v3.2.1 | https://github.com/ryanmorr/isotope */class t{#e;#t=[];constructor(e){this.#e=e,this.#t=[]}value(){return this.#e}set(e){const t=this.value();if(e!==t)return this.#e=e,this.#t.slice().forEach((n=>n(e,t))),e}subscribe(e){const t=this.#t;if(!t.includes(e))return t.push(e),e(this.value()),()=>{const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}then(e){e(this.value())}toString(){return String(this.value())}valueOf(){return this.value()}toJSON(){return this.value()}}let n=class extends t{update(e){return this.set(e(this.value()))}},r=class extends t{constructor(e,t,n){super();let r=!1;const s=[],u=n?()=>super.set(t(s)):()=>super.set(t(...s));e.forEach(((e,t)=>e.subscribe((e=>{s[t]=e,r&&u()})))),r=!0,u()}};class s extends t{constructor(e,t,n){super();let r=0,s=!1;const u=[],o=n?e=>t(u,e):e=>t(...u.concat([e]));e.forEach(((e,t)=>e.subscribe((e=>{if(u[t]=e,s){r++;const e=r;o((t=>{r===e&&super.set(t)}))}})))),s=!0,o((e=>super.set(e)))}}r.prototype.set=void 0,s.prototype.set=void 0,class extends t{#n;constructor(e,t){super(e),this.#n=t}dispatch(e){return super.set(this.#n(this.value(),e))}}.prototype.set=void 0;
/*! @ryanmorr/amble v0.2.0 | https://github.com/ryanmorr/amble */
const u=/([^{};]*)([;{}])/g,o=/(\r\n|\r|\n)+/g,c=/\t/g,i=/\s{2,}/g,l=/\/\*[\W\w]*?\*\//g,a=/\s*([:;{}])\s*/g,f=/\};+/g,h=/([^:;{}])}/g;class d extends t{constructor(e){super(),this.mq=matchMedia(e),this.mq.addEventListener("change",this.set.bind(this)),this.query=e,this.set()}set(){super.set(this.mq.matches)}}let p=null;const m=[];function y(e){return Array.from(document.querySelectorAll(e))}class g extends t{constructor(e){var t;super(y(e)),this.selector=e,t=this,p||(p=new MutationObserver((()=>m.forEach((e=>e.set())))),p.observe(document.documentElement,{childList:!0,subtree:!0})),m.push(t)}set(){const e=this.value(),t=y(this.selector);(t.filter((t=>!e.includes(t))).length>0||e.filter((e=>!t.includes(e))).length>0)&&super.set(t)}}function v(){return Math.random().toString(36).substring(2,11)}function b(e){return e&&"function"==typeof e.subscribe}function x(e){return e instanceof Promise}function $(e,t,n){return e.raw.reduce(((e,r,s)=>e+n(t[s-1])+r))}const E=new WeakMap,w=document.documentElement.style;function S(e,t){if("function"==typeof t)return S(e,t());if(x(t))return t.then((t=>S(e,t)));""!==w.getPropertyValue(e)&&null==t?w.removeProperty(e):null!=t&&w.setProperty(e,t)}function q(e){if(E.has(e))return E.get(e);const t=`--${v()}`;return b(e)?e.subscribe((e=>S(t,e))):e.then((e=>S(t,e))),E.set(e,t),t}let A;const k=/([\s\S]+,[\s\S]+)/m;function C(e){const t=[{children:[]}];let n=0;return function(e,t){e=function(e){return e.replace(o," ").replace(c," ").replace(i," ").replace(l,"").trim().replace(a,"$1").replace(f,"}").replace(h,"$1;}")}(e),u.lastIndex=0;for(let n;null!=(n=u.exec(e));)t(n[1],n[2])}(e,((e,r)=>{"{"==r?t[++n]={selector:e,rules:"",children:[]}:"}"==r?(t[n].rules+=e,t[--n].children.push(t.pop())):";"==r&&(t[n].rules+=e+r)})),t[0].children}function M(e,t){return e.reduce(((e,n)=>{let r=n.selector.trim();return"@"===r[0]?(e+=r+"{",n.children.length>0&&(e+=M(n.children,t)+"}")):(r=t&&"&"===r[0]?t+r.substring(1).replace(k,":is($1)"):t?t+" "+r.replace(k,":is($1)"):r.replace(k,":is($1)"),e+=r+"{"+n.rules+"}",n.children.length>0&&(e+=M(n.children,r))),e}),"")}function O(e){return M(C(e))}function P(e){return"function"==typeof e?P(e()):b(e)?e instanceof d?"@media "+e.query:e instanceof g?e.selector:`var(${q(e)})`:x(e)?`var(${q(e)})`:e&&1===e.nodeType&&"STYLE"===e.nodeName?e.textContent:e}function T(e){A||(A=document.createElement("style"),document.head.appendChild(A)),A.textContent+=e}function L(e){return"function"==typeof e?L(e()):b(e)?`var(${q(e)})`:e}e.css=function(e,...t){const n=$(e,t,P),r=document.createElement("style");return r.textContent+=O(n),r},e.derived=function(...e){let t,n;const u=Array.isArray(e[0]);u?(t=e[0],n=e[1]):(t=e,n=e.pop());const o=n.length;return u&&2===o||o>t.length?new s(t,n,u):new r(t,n,u)},e.fallback=function(...e){let t=1;const n=e.length,r=(e,s,u)=>"function"==typeof s?r(e,s(),u):(b(s)||x(s)?(t++,e+=`var(${q(s)}`):"string"==typeof s&&s.startsWith("--")?(t++,e+=`var(${s}`):e+=s,e+=u+1!==n?", ":Array(t).join(")"));return e.reduce(r,"")},e.keyframes=function(e,...t){const n="fusion-animation-"+v();return T(`@keyframes ${n} { ${$(e,t,L)} }`),n},e.media=function(e){return new d(e)},e.query=function(e){return new g(e)},e.store=function(e){return new n(e)},e.style=function(e,...t){const n=$(e,t,P),r="fusion-"+v();return T(O(`.${r} { ${n} }`)),r}}));
