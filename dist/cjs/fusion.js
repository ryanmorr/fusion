/*! @ryanmorr/fusion v1.0.1 | https://github.com/ryanmorr/fusion */
"use strict";
/*! @ryanmorr/isotope v3.2.1 | https://github.com/ryanmorr/isotope */class e{#e;#t=[];constructor(e){this.#e=e,this.#t=[]}value(){return this.#e}set(e){const t=this.value();if(e!==t)return this.#e=e,this.#t.slice().forEach((n=>n(e,t))),e}subscribe(e){const t=this.#t;if(!t.includes(e))return t.push(e),e(this.value()),()=>{const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}then(e){e(this.value())}toString(){return String(this.value())}valueOf(){return this.value()}toJSON(){return this.value()}}let t=class extends e{update(e){return this.set(e(this.value()))}},n=class extends e{constructor(e,t,n){super();let r=!1;const s=[],u=n?()=>super.set(t(s)):()=>super.set(t(...s));e.forEach(((e,t)=>e.subscribe((e=>{s[t]=e,r&&u()})))),r=!0,u()}};class r extends e{constructor(e,t,n){super();let r=0,s=!1;const u=[],c=n?e=>t(u,e):e=>t(...u.concat([e]));e.forEach(((e,t)=>e.subscribe((e=>{if(u[t]=e,s){r++;const e=r;c((t=>{r===e&&super.set(t)}))}})))),s=!0,c((e=>super.set(e)))}}n.prototype.set=void 0,r.prototype.set=void 0,class extends e{#n;constructor(e,t){super(e),this.#n=t}dispatch(e){return super.set(this.#n(this.value(),e))}}.prototype.set=void 0;
/*! @ryanmorr/amble v0.2.0 | https://github.com/ryanmorr/amble */
const s=/([^{};]*)([;{}])/g,u=/(\r\n|\r|\n)+/g,c=/\t/g,o=/\s{2,}/g,i=/\/\*[\W\w]*?\*\//g,l=/\s*([:;{}])\s*/g,a=/\};+/g,h=/([^:;{}])}/g;class p extends e{constructor(e){super(),this.mq=matchMedia(e),this.mq.addEventListener("change",this.set.bind(this)),this.query=e,this.set()}set(){super.set(this.mq.matches)}}let f=null;const d=[];function m(e){return Array.from(document.querySelectorAll(e))}class y extends e{constructor(e){var t;super(m(e)),this.selector=e,t=this,f||(f=new MutationObserver((()=>d.forEach((e=>e.set())))),f.observe(document.documentElement,{childList:!0,subtree:!0})),d.push(t)}set(){const e=this.value(),t=m(this.selector);(t.filter((t=>!e.includes(t))).length>0||e.filter((e=>!t.includes(e))).length>0)&&super.set(t)}}function v(){return Math.random().toString(36).substring(2,11)}function g(e){return e&&"function"==typeof e.subscribe}function x(e){return e instanceof Promise}function b(e,t,n){return e.raw.reduce(((e,r,s)=>e+n(t[s-1])+r))}const $=new WeakMap,E=document.documentElement.style;function w(e,t){if("function"==typeof t)return w(e,t());if(x(t))return t.then((t=>w(e,t)));""!==E.getPropertyValue(e)&&null==t?E.removeProperty(e):null!=t&&E.setProperty(e,t)}function S(e){if($.has(e))return $.get(e);const t=`--${v()}`;return g(e)?e.subscribe((e=>w(t,e))):e.then((e=>w(t,e))),$.set(e,t),t}let q;const A=/([\s\S]+,[\s\S]+)/m;function k(e){const t=[{children:[]}];let n=0;return function(e,t){e=function(e){return e.replace(u," ").replace(c," ").replace(o," ").replace(i,"").trim().replace(l,"$1").replace(a,"}").replace(h,"$1;}")}(e),s.lastIndex=0;for(let n;null!=(n=s.exec(e));)t(n[1],n[2])}(e,((e,r)=>{"{"==r?t[++n]={selector:e,rules:"",children:[]}:"}"==r?(t[n].rules+=e,t[--n].children.push(t.pop())):";"==r&&(t[n].rules+=e+r)})),t[0].children}function C(e,t){return e.reduce(((e,n)=>{let r=n.selector.trim();return"@"===r[0]?(e+=r+"{",n.children.length>0&&(e+=C(n.children,t)+"}")):(r=t&&"&"===r[0]?t+r.substring(1).replace(A,":is($1)"):t?t+" "+r.replace(A,":is($1)"):r.replace(A,":is($1)"),e+=r+"{"+n.rules+"}",n.children.length>0&&(e+=C(n.children,r))),e}),"")}function M(e){return C(k(e))}function O(e){return"function"==typeof e?O(e()):g(e)?e instanceof p?"@media "+e.query:e instanceof y?e.selector:`var(${S(e)})`:x(e)?`var(${S(e)})`:e&&1===e.nodeType&&"STYLE"===e.nodeName?e.textContent:e}function P(e){q||(q=document.createElement("style"),document.head.appendChild(q)),q.textContent+=e}function L(e){return"function"==typeof e?L(e()):g(e)?`var(${S(e)})`:e}exports.css=function(e,...t){const n=b(e,t,O),r=document.createElement("style");return r.textContent+=M(n),r},exports.derived=function(...e){let t,s;const u=Array.isArray(e[0]);u?(t=e[0],s=e[1]):(t=e,s=e.pop());const c=s.length;return u&&2===c||c>t.length?new r(t,s,u):new n(t,s,u)},exports.fallback=function(...e){let t=1;const n=e.length,r=(e,s,u)=>"function"==typeof s?r(e,s(),u):(g(s)||x(s)?(t++,e+=`var(${S(s)}`):"string"==typeof s&&s.startsWith("--")?(t++,e+=`var(${s}`):e+=s,e+=u+1!==n?", ":Array(t).join(")"));return e.reduce(r,"")},exports.keyframes=function(e,...t){const n="fusion-animation-"+v();return P(`@keyframes ${n} { ${b(e,t,L)} }`),n},exports.media=function(e){return new p(e)},exports.query=function(e){return new y(e)},exports.store=function(e){return new t(e)},exports.style=function(e,...t){const n=b(e,t,O),r="fusion-"+v();return P(M(`.${r} { ${n} }`)),r};
