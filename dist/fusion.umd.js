/*! @ryanmorr/fusion v0.2.0 | https://github.com/ryanmorr/fusion */function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}(function(a,b){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a=a||self,b(a.fusion={}))})(this,function(a){'use strict';function b(){return Math.random().toString(36).substr(2,9)}function c(a){return a&&"function"==typeof a.subscribe}function d(a){return Promise.resolve(a)===a}function e(a,b){if("function"==typeof b)return e(a,b());if(d(b))return b.then(function(b){return e(a,b)});var c=y.getPropertyValue(a);""!==c&&null==b?y.removeProperty(a):null!=b&&y.setProperty(a,b)}function f(a){if(t in a)return a[t];var d="--".concat(b());return c(a)?a.subscribe(function(a){return e(d,a)}):a.then(function(a){return e(d,a)}),a[t]=d}function g(a){if("function"==typeof a&&!c(a))return g(a());if(c(a)){if(!(u in a))return"var(".concat(f(a),")");if(a[u]===v)return"@media ".concat(a[t]);if(a[u]===x){var b=a.toString();return b in z||(z[b]="@keyframes ".concat(b," { ").concat(a[t]," }")),b}if(a[u]===w)return a[t]}return d(a)?"var(".concat(f(a),")"):a}function h(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function i(a){return Array.from(document.querySelectorAll(a))}function j(){B||(B=new MutationObserver(k),B.observe(document.documentElement,{childList:!0,subtree:!0}))}function k(){C.forEach(function(a){var b=a.selector,c=a.get,d=a.set,e=c(),f=i(b),g=f.filter(function(a){return!e.includes(a)}),h=e.filter(function(a){return!f.includes(a)});(0<g.length||0<h.length)&&d(f,e)})}function l(){E.addEventListener("animationstart",m),E.addEventListener("animationend",n),E.addEventListener("animationcancel",n)}function m(a){var b=a.animationName;if(b in F){var c=F[b],d=c.get,e=c.set,f=a.target,g=d(),h=g.concat([f]);e(h,g)}}function n(a){var b=a.animationName;if(b in F){var c=F[b],d=c.get,e=c.set,f=a.target,g=d(),h=g.filter(function(a){return a!==f});e(h,g)}}function o(a){return"function"==typeof a?o(a()):c(a)?"var(".concat(f(a),")"):a}var p=function(a,b){return b={exports:{}},a(b,b.exports),b.exports}(function(a,b){Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=void 0;b["default"]=function(i){return function(){var j,k=[],a=function(){return j},c=function(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];return j=c[0],k.slice().forEach(function(b){return b.apply(void 0,c)}),j},d=function(c){if(!k.includes(c))return k.push(c),c(j),function(){var a=k.indexOf(c);-1!==a&&k.splice(a,1)}},e=i(a,c,d,k),f=e.apply(void 0,arguments);return f.subscribe||(f.subscribe=d),f}}}),q=function(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a["default"]:a}(p),r=q(function(a,b){return function(c){b(c);var d=function(c){return b(c,a()),c};return{get:a,set:d,update:function(b){return d(b(a()))}}}}),s=q(function(a,b){return function(){for(var c=!1,d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];var g=e.pop(),h=[],j=function(){return b(g.apply(void 0,h),a())};return e.forEach(function(a,b){return a.subscribe(function(a){h[b]=a,c&&j()})}),c=!0,j(),{get:a}}}),t=Symbol("css"),u=Symbol("type"),v=Symbol("media"),w=Symbol("query"),x=Symbol("keyframes"),y=document.documentElement.style,z={},A=q(function(a,b){return function(c){var d,e=matchMedia(c),f=function(){return b(e.matches)};return"addEventListener"in e?e.addEventListener("change",f):e.addListener(f),f(),(d={},h(d,u,v),h(d,t,c),h(d,"get",a),d)}}),B=null,C=[],D=q(function(a,b){return function(c){var d;return j(),C.push({selector:c,get:a,set:b}),b(i(c),[]),(d={},h(d,u,w),h(d,t,c),h(d,"get",a),d)}}),E=document.documentElement,F={},G=q(function(a,c){return function(d){for(var e,f=arguments.length,g=Array(1<f?f-1:0),i=1;i<f;i++)g[i-1]=arguments[i];l();var j="animation-"+b(),k=d.raw.reduce(function(a,b,c){return a+o(g[c-1])+b});return F[j]={get:a,set:c},c([],[]),(e={},h(e,u,x),h(e,t,k),h(e,"toString",function(){return j}),h(e,"get",a),e)}});a.css=function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=a.raw.reduce(function(a,b,d){return a+g(c[d-1])+b});Object.keys(z).forEach(function(a){var b=z[a];"string"==typeof b&&(e+=" "+b,z[a]=!0)});var f=document.createElement("style");return f.appendChild(document.createTextNode(e)),f},a.derived=s,a.fallback=function(){for(var a=1,b=arguments.length,e=Array(b),g=0;g<b;g++)e[g]=arguments[g];var h=e.length,i=function b(e,g,j){return"function"==typeof g?b(e,g(),j):(c(g)||d(g)?(a++,e+="var(".concat(f(g))):"string"==typeof g&&g.startsWith("--")?(a++,e+="var(".concat(g)):e+=g,e+=j+1===h?Array(a).join(")"):", ",e)};return e.reduce(i,"")},a.keyframes=G,a.media=A,a.query=D,a.val=r,Object.defineProperty(a,"__esModule",{value:!0})});
