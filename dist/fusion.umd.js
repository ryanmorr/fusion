/*! @ryanmorr/fusion v0.1.0 | https://github.com/ryanmorr/fusion */function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}(function(a,b){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a=a||self,b(a.fusion={}))})(this,function(a){'use strict';function b(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function c(){return Math.random().toString(36).substr(2,9)}function d(a){return a&&"function"==typeof a.subscribe}function e(a){return Promise.resolve(a)===a}function f(a){if(d(a)){if("val"===a[o]||"derived"===a[o])return"var(".concat(h(a),")");if("media"===a[o])return"@media ".concat(a[n]);if("query"===a[o])return a[n]}return e(a)?"var(".concat(h(a),")"):a}function g(a,b){if(e(b))return void b.then(function(b){return g(a,b)});var c=r.getPropertyValue(a);""!==c&&null==b?r.removeProperty(a):null!=b&&r.setProperty(a,b)}function h(a){if(n in a)return a[n];var b="--".concat(c());return d(a)?a.subscribe(function(a){return g(b,a)}):a.then(function(a){return g(b,a)}),a[n]=b}function i(a){return Array.from(document.querySelectorAll(a))}function j(){t||(t=new MutationObserver(k),t.observe(document.documentElement,{childList:!0,subtree:!0}))}function k(){u.forEach(function(a){var b=a.selector,c=a.get,d=a.set,e=c(),f=i(b),g=f.filter(function(a){return!e.includes(a)}),h=e.filter(function(a){return!f.includes(a)});(0<g.length||0<h.length)&&d(f,e,g,h)})}var l=function(a,b){return b={exports:{}},a(b,b.exports),b.exports}(function(a,b){Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=void 0;b["default"]=function(i){return function(){var j,k=[],a=function(){return j},c=function(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];return j=c[0],k.slice().forEach(function(b){return b.apply(void 0,c)}),j},d=function(c){if(!k.includes(c))return k.push(c),c(j),function(){var a=k.indexOf(c);-1!==a&&k.splice(a,1)}},e=i(a,c,d,k),f=e.apply(void 0,arguments);return f.subscribe||(f.subscribe=d),f}}}),m=function(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a["default"]:a}(l),n=Symbol("css"),o=Symbol("type"),p=m(function(a,c){return function(d){var e;c(d);var f=function(b){c(b,a())};return e={},b(e,o,"val"),b(e,"get",a),b(e,"set",f),b(e,"update",function(b){f(b(a()))}),e}}),q=m(function(a,c){return function(){for(var d,e=!1,f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];var i=g.pop(),j=[],k=function(){return c(i.apply(void 0,j),a())};return g.forEach(function(a,b){return a.subscribe(function(a){j[b]=a,e&&k()})}),e=!0,k(),(d={},b(d,o,"derived"),b(d,"get",a),d)}}),r=document.documentElement.style,s=m(function(a,c){return function(d){var e,f=matchMedia(d),g=function(){return c(f.matches)};return"addEventListener"in f?f.addEventListener("change",g):f.addListener(g),g(),(e={},b(e,o,"media"),b(e,n,d),b(e,"get",a),e)}}),t=null,u=[],v=m(function(a,c){return function(d){var e;return j(),u.push({selector:d,get:a,set:c}),c(i(d),[],[],[]),(e={},b(e,o,"query"),b(e,n,d),b(e,"get",a),e)}});a.css=function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=a.raw.reduce(function(a,b,d){return a+f(c[d-1])+b}),g=document.createElement("style");return g.appendChild(document.createTextNode(e)),g},a.derived=q,a.fallback=function(){for(var a=1,b=arguments.length,c=Array(b),f=0;f<b;f++)c[f]=arguments[f];var g=c.length;return c.reduce(function(b,c,f){return d(c)||e(c)?(a++,b+="var(".concat(h(c))):"string"==typeof c&&c.startsWith("--")?(a++,b+="var(".concat(c)):b+=c,b+=f+1===g?Array(a).join(")"):", ",b},"")},a.media=s,a.query=v,a.val=p,Object.defineProperty(a,"__esModule",{value:!0})});
